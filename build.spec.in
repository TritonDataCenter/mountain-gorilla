#set -o xtrace
set -o errexit
set -o pipefail

cat <<HERE;
{
  "no-internet": "false",

  "build-tgz": "true",
  "bits-url": "(unused because build passes in BITS_URL envvar)",
  "bits-branch": "(unused because build uses a local dir BITS_URL)",

  "platform-release": "$(ls bits/platform/platform*.tgz | xargs basename | cut -d- -f2)",
  "sdcboot-release": "$(ls bits/sdcboot/sdcboot*.tgz | xargs basename | cut -d- -f2)",
  "firmware-tools-release": "$(ls bits/firmware-tools/firmware-tools*.tgz | xargs basename | cut -d- -f3)",
  "agents-shar": "$(ls bits/agentsshar/agents-*.sh | xargs basename | cut -d- -f2)",

  "// *-image": "This should be kept in sync with usb-headnode.git/build.spec",
  "adminui-image": "adminui/$(ls bits/adminui/adminui-*manifest | xargs basename)",
  "amon-image": "amon/$(ls bits/amon/amon-*manifest | xargs basename)",
  "amonredis-image": "amonredis/$(ls bits/amonredis/amonredis-*manifest | xargs basename)",
  "assets-image": "assets/$(ls bits/assets/assets-*manifest | xargs basename)",
  "binder-image": "binder/$(ls bits/binder/binder-*manifest | xargs basename)",
  "ca-image": "ca/$(ls bits/ca/ca-*manifest | xargs basename)",
  "cloudapi-image": "cloudapi/$(ls bits/cloudapi/cloudapi-*manifest | xargs basename)",
  "cnapi-image": "cnapi/$(ls bits/cnapi/cnapi-*manifest | xargs basename)",
  "dapi-image": "dapi/$(ls bits/dapi/dapi-*manifest | xargs basename)",
  "dhcpd-image": "dhcpd/$(ls bits/dhcpd/dhcpd-*manifest | xargs basename)",
  "fwapi-image": "fwapi/$(ls bits/fwapi/fwapi-*manifest | xargs basename)",
  "imgapi-image": "imgapi/$(ls bits/imgapi/imgapi-*manifest | xargs basename)",
  "keyapi-image": "keyapi/$(ls bits/keyapi/keyapi-*manifest | xargs basename)",
  "manatee-image": "manatee/$(ls bits/manatee/manatee-*manifest | xargs basename)",
  "manta-image": "manta-deployment/$(ls bits/manta-deployment/manta-deployment-*manifest | xargs basename)",
  "moray-image": "moray/$(ls bits/moray/moray-*manifest | xargs basename)",
  "napi-image": "napi/$(ls bits/napi/napi-*manifest | xargs basename)",
  "papi-image": "papi/$(ls bits/papi/papi-*manifest | xargs basename)",
  "rabbitmq-image": "rabbitmq/$(ls bits/rabbitmq/rabbitmq-*manifest | xargs basename)",
  "redis-image": "redis/$(ls bits/redis/redis-*manifest | xargs basename)",
  "sapi-image": "sapi/$(ls bits/sapi/sapi-*manifest | xargs basename)",
  "sdc-image": "sdc/$(ls bits/sdc/sdc-*manifest | xargs basename)",
  "sdcsso-image": "sdcsso/$(ls bits/sdcsso/sdcsso-*manifest | xargs basename)",
  "ufds-image": "ufds/$(ls bits/ufds/ufds-*manifest | xargs basename)",
  "usageapi-image": "usageapi/$(ls bits/usageapi/usageapi-*manifest | xargs basename)",
  "vcapi-image": "vcapi/$(ls bits/vcapi/vcapi-*manifest | xargs basename)",
  "vmapi-image": "vmapi/$(ls bits/vmapi/vmapi-*manifest | xargs basename)",
  "workflow-image": "workflow/$(ls bits/workflow/workflow-*manifest | xargs basename)"
}
HERE
